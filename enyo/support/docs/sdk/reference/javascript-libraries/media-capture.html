<!DOCTYPE html>
<html>
	<head>
		<title>$if(pagetitle)$$pagetitle$$endif$</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" href="_css/chrome.css" />
		<link rel="stylesheet" href="../_css/chrome.css" />
		<link rel="stylesheet" href="../../_css/chrome.css" />
		<link rel="stylesheet" href="../../../_css/chrome.css" />
		<script src="_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="../../../_js/jquery-1.4.2.min.js" type="text/javascript"></script>
		<script src="_js/doc.js" type="text/javascript"></script>
		<script src="../_js/doc.js" type="text/javascript"></script>
		<script src="../../_js/doc.js" type="text/javascript"></script>
		<script src="../../../_js/doc.js" type="text/javascript"></script>
	</head>
	<body>
		<div id="content">
    
    <h1 id="mediacapture">
      MediaCapture
    </h1>
    <p>
      The Media Capture functionality for recording audio and video and taking camera stills is now part of the Mojo Foundation libraries - there is no longer any need to include &quot;media.js&quot;. Instead, your app needs to allocate a [Media Capture object][mcint] and use its APIs, properties and events.
    </p>
    <h2 id="using-mediacapture">
      Using MediaCapture
    </h2>
    <p>
      <strong>NOTE</strong>: These steps are approximate. They are going to vary in specific ways according to your app's needs.
    </p>
    <p>
      To include the Media Capture code in your app:
    </p>
    <ol style="list-style-type: decimal">
      <li>
        <p>
          If it exists, remove the script tag that includes &quot;media.js&quot;.
        </p>
      </li>
      <li>
        <p>
          Have the following script tags in your app's index.html file:
        </p>
        <pre>
<code>&lt;script src=&quot;/usr/palm/frameworks/mojo/mojo.js&quot; type=&quot;text/javascript&quot; x-mojo-version=&quot;1&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;/usr/palm/frameworks/mojoloader.js&quot;&gt;&lt;/script&gt;
</code>
</pre>
      </li>
      <li>
        <p>
          Load the media extension libraries for media capture in your scene's JavaScript:
        </p>
        <pre>
<code>var libraries = MojoLoader.require({ name: &quot;mediacapture&quot;, version: &quot;1.0&quot; });
</code>
</pre>
      </li>
      <li>
        <p>
          Instantiate the Media Capture object:
        </p>
        <pre>
<code>this.mediaCaptureObj = libraries.mediacapture.MediaCapture();
</code>
</pre>
        <p>
          For video capture, allocate the Media Capture object with a video URI to indicate the video element or pipeline that will display the video for preview:
        </p>
        <pre>
<code>this.videoObject = this.controller.get('video-object'); 
this.mediaCaptureObj = ibraries.mediacapture.MediaCapture(this.videoObject);
</code>
</pre>
      </li>
      <li>
        <p>
          Select your device format based on your app's criteria.
        </p>
        <p>
          <strong>Still capture app example:</strong>
        </p>
        <pre>
<code>var fmt; 
for (i=0; this.mediaCaptureObj.supportedImageFormats.length != i; ++i){
     fmt = this.mediaCaptureObj.supportedImageFormats[i];
     if (fmt.mimetype == &quot;image/jpeg&quot;){
        break;
      }
}
</code>
</pre>
        <p>
          <strong>Voice recording app example:</strong>
        </p>
        <pre>
<code>var fmt; 
for (i=0; this.mediaCaptureObj.supportedAudioFormats.length != i; ++i){
     fmt = this.mediaCaptureObj.supportedAudioFormats[i];
     if (fmt.samplerate == 8000){
        break;
      }
}
</code>
</pre>
      </li>
      <li>
        <p>
          Select your device for capture.
        </p>
        <p>
          <strong>Still capture app example:</strong>
        </p>
        <pre>
<code>var dev; 
for (var i=0; i != this.mediaCaptureObj.captureDevices.length; ++i){
   dev = this.mediaCaptureObj.captureDevices[i];
   for (var typeIdx = 0; typeIdx != dev.inputtype.length; ++typeIdx){
      if (dev.inputtype[typeIdx] == this.mediaCaptureObj.INPUT_TYPE_IMAGE){
         break;
      }
   }
}
</code>
</pre>
        <p>
          <strong>Voice recording app example:</strong>
        </p>
        <pre>
<code>var dev; 
for (var i=0; i != this.mediaCaptureObj.captureDevices.length; ++i){
   dev = this.mediaCaptureObj.captureDevices[i];
   for (var typeIdx = 0; typeIdx != dev.inputtype.length; ++typeIdx){
      if (dev.inputtype[typeIdx] == this.mediaCaptureObj.INPUT_TYPE_AUDIO){
         break;
      }
   }
}
</code>
</pre>
      </li>
      <li>
        <p>
          Load your capture device. For example - for image:
        </p>
        <pre>
<code>this.mediaCaptureObj.load( dev.deviceUri, {&quot;imageCaptureFormat&quot;:fmt});
</code>
</pre>
      </li>
      <li>
        <p>
          Have your event handler in place for capture completion. For example:
        </p>
        <pre>
<code>this.mediaCaptureObj.addEventListener(&quot;imagecapturecomplete&quot;, this.pictureTaken , false);
</code>
</pre>
      </li>
      <li>
        <p>
          Start media capture. For example - image capture:
        </p>
        <pre>
<code>var ImageCaptureOptions ={'quality' : 100,'flash':this.flashValue,'reviewDuration':5,'exifData':{}}
var picDate = new Date();
this.picName = &quot;Sample&quot; + picDate.UTC() 
this.mediaCaptureObj.startImageCapture('/media/internal/dts/samples/'+this.picName+'.jpg', ImageCaptureOptions);
</code>
</pre>
      </li>
      <li>
        <p>
          Clean up when done.
        </p>
        <pre>
<code>this.mediaCaptureObj.removeEventListener(&quot;imagecapturecomplete&quot;,this.pictureTaken , false);
this.mediaCaptureObj.unload();
</code>
</pre>
      </li>
    </ol>
    <h3 id="file-storage">
      File Storage
    </h3>
    <p>
      You can save capture files to any location under <code>/media/internal/</code>. If your file path does not exist, it is created, including new folders.
    </p>
    <p>
      <a name="properties" id="properties">&#160;</a>
    </p>
    <hr>
    <h2 id="mediacapture-properties">
      MediaCapture Properties
    </h2>
    <table border="1">
      <thead>
        <tr>
          <th>
            Attribute
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            audioCapture
          </td>
          <td>
            boolean
          </td>
          <td>
            Is audio capture active flag.
          </td>
        </tr>
        <tr>
          <td>
            <a name="captureDevices" id="captureDevices">captureDevices</a>
          </td>
          <td>
            <a href="#CaptureDevice">CaptureDevice</a> array
          </td>
          <td>
            Available capture devices. Example:
            <pre>
[{"inputtype":[1],"deviceUri":"audio:","description":"Front Microphone"},<br>{"inputtype":[2,3],"deviceUri":"video:","description":"Camera/Camcorder"}]
</pre>
          </td>
        </tr>
        <tr>
          <td>
            currentAudioCaptureOptions
          </td>
          <td>
            <a href="#AudioCaptureOptions">AudioCaptureOptions</a>
          </td>
          <td>
            Current audio capture options.
          </td>
        </tr>
        <tr>
          <td>
            currentAudioCapturePath
          </td>
          <td>
            string
          </td>
          <td>
            Current audio capture path.
          </td>
        </tr>
        <tr>
          <td>
            currentDeviceUri
          </td>
          <td>
            string
          </td>
          <td>
            The input device selected.
          </td>
        </tr>
        <tr>
          <td>
            currentImageCaptureOptions
          </td>
          <td>
            <a href="#ImageCaptureOptions">ImageCaptureOptions</a>
          </td>
          <td>
            Current image capture options.
          </td>
        </tr>
        <tr>
          <td>
            currentImageCapturePath
          </td>
          <td>
            string
          </td>
          <td>
            Current image capture path.
          </td>
        </tr>
        <tr>
          <td>
            currentVideoCaptureOptions
          </td>
          <td>
            <a href="#VideoCaptureOptions">VideoCaptureOptions</a>
          </td>
          <td>
            Current video capture options.
          </td>
        </tr>
        <tr>
          <td>
            currentVideoCapturePath
          </td>
          <td>
            string
          </td>
          <td>
            Current video capture path.
          </td>
        </tr>
        <tr>
          <td>
            duration
          </td>
          <td>
            float
          </td>
          <td>
            Duration of the currently active capture in seconds. This is set based on the value provided in the capture options. If available space is less than that requested, the duration property is updated and a <a href="#durationchange">durationchange</a> event is generated.
          </td>
        </tr>
        <tr>
          <td>
            <a name="elapsedTime" id="elapsedTime">elapsedTime</a>
          </td>
          <td>
            float
          </td>
          <td>
            Amount of video captured in seconds.
          </td>
        </tr>
        <tr>
          <td>
            <a name="error" id="error">error</a>
          </td>
          <td>
            int
          </td>
          <td>
            Indicates operation failure reason. When an error occurs, the error event also fires. Possible values:<br>
            <pre>
0 - ERROR_NONE,
1 - ERROR_BAD_SOURCE, (Not currently used)
2 - ERROR_BAD_MODE, (If capture device is different from loaded device)
3 - ERROR_NO_SPACE, (No device storage space)
4 - ERROR_NO_PIPELINE,
5 - ERROR_RESOURCE_CONFLICT, (For example, some other app is using camera)
6 - ERROR_TIMEOUT, (General system error)
7 - ERROR_OTHER
</pre>
          </td>
        </tr>
        <tr>
          <td>
            <a name="imageCapture" id="imageCapture">imageCapture</a>
          </td>
          <td>
            boolean
          </td>
          <td>
            Flag indicating image (still) capture is active. When <code>true</code> (capture starts) the <a href="#imagecapturestart">imagecapturestart</a> event is fired.
          </td>
        </tr>
        <tr>
          <td>
            <a name="lastAudioPath" id="lastAudioPath">lastAudioPath</a>
          </td>
          <td>
            string
          </td>
          <td>
            Location of the last captured audio.
          </td>
        </tr>
        <tr>
          <td>
            <a name="lastImagePath" id="lastImagePath">lastImagePath</a>
          </td>
          <td>
            string
          </td>
          <td>
            Location of the last captured image. The path is set before the <a href="#imagecapturecomplete">imagecapturecomplete</a> event fires.
          </td>
        </tr>
        <tr>
          <td>
            <a name="lastVideoPath" id="lastVideoPath">lastVideoPath</a>
          </td>
          <td>
            string
          </td>
          <td>
            Location of the last captured video.
          </td>
        </tr>
        <tr>
          <td>
            <a name="ready" id="ready">ready</a>
          </td>
          <td>
            boolean
          </td>
          <td>
            Pipeline state. Transitions to <code>true</code> after <a href="#load">load</a> (of the capture device) is called.
          </td>
        </tr>
        <tr>
          <td>
            <a name="supportedAudioFormats" id="supportedAudioFormats">supportedAudioFormats</a>
          </td>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a> array
          </td>
          <td>
            Supported audio formats. For example:
            <pre>
[{"mimetype":"audio/vnd.wave","codecs":"1","bitrate":128000,"samplerate":8000},
{"mimetype":"audio/vnd.wave","codecs":"1","bitrate":256000,"samplerate":16000},
{"mimetype":"audio/vnd.wave","codecs":"1","bitrate":7100000,"samplerate":44100},
{"mimetype":"audio/3gpp","codecs":"samr","bitrate":8000,"samplerate":8000}]
</pre>
          </td>
        </tr>
        <tr>
          <td>
            <a name="supportedImageFormats" id="supportedImageFormats">supportedImageFormats</a>
          </td>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a> array
          </td>
          <td>
            Supported image formats. For example:
            <pre>
[{"mimetype":"image/jpeg","codecs":"jpeg","width":2032,"height":1520}]
</pre>
          </td>
        </tr>
        <tr>
          <td>
            <a name="supportedVideoFormats" id="supportedVideoFormats">supportedVideoFormats</a>
          </td>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a> array
          </td>
          <td>
            Supported video formats. For example:
            <pre>
[{"mimetype":"video/mp4","codecs":"mp4v.20,mp4a.40","width":640,"height":480,"bitrate":1100000}]
</pre>
          </td>
        </tr>
        <tr>
          <td>
            <a name="videoCapture" id="videoCapture">videoCapture</a>
          </td>
          <td>
            boolean
          </td>
          <td>
            Flag indicating that video capture is active.
          </td>
        </tr>
        <tr>
          <td>
            <a name="vuData" id="vuData">vuData</a>
          </td>
          <td>
            <a href="#AudioVolume">AudioVolume</a> array.
          </td>
          <td>
            Recent audio samples.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <a name="dataTypes" id="dataTypes">&#160;</a>
    </p>
    <hr>
    <h2 id="mediacapture-data-structures">
      MediaCapture Data Structures
    </h2>
    <table border="1">
      <thead>
        <tr>
          <th>
            Structure
          </th>
          <th>
            Description
          </th>
          <th>
            Ref'd by
          </th>
          <th>
            APIs
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <a href="#AudioCaptureOptions">AudioCaptureOptions</a>
          </td>
          <td width="400">
            Options for audio capture.
          </td>
          <td>
            &#160;
          </td>
          <td>
            <a href="#startAudioCapture">startAudioCapture</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#AudioVolume">AudioVolume</a>
          </td>
          <td width="400">
            Audio volume sample.
          </td>
          <td>
            &#160;
          </td>
          <td>
            &#160;
          </td>
        </tr>
        <tr>
          <td>
            <a href="#CaptureDevice">CaptureDevice</a>
          </td>
          <td width="400">
            Description and URI of capture device.
          </td>
          <td>
            &#160;
          </td>
          <td>
            &#160;
          </td>
        </tr>
        <tr>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a>
          </td>
          <td width="400">
            Capture format options.
          </td>
          <td>
            <a href="#LoadOptions">LoadOptions</a><br>
            <a href="#supportedAudioFormats">supportedAudioFormats</a><br>
            <a href="#supportedImageFormats">supportedImageFormats</a><br>
            <a href="#supportedVideoFormats">supportedVideoFormats</a>
          </td>
          <td>
            <a href="#startAudioCapture">startAudioCapture</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#ImageCaptureOptions">ImageCaptureOptions</a>
          </td>
          <td width="400">
            Options for image capture.
          </td>
          <td>
            &#160;
          </td>
          <td>
            <a href="#startImageCapture">startImageCapture</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#LoadOptions">LoadOptions</a>
          </td>
          <td width="400">
            Load options.
          </td>
          <td>
            &#160;
          </td>
          <td>
            <a href="#load">load</a>
          </td>
        </tr>
        <tr>
          <td>
            <a href="#VideoCaptureOptions">VideoCaptureOptions</a>
          </td>
          <td width="400">
            Options for video capture.
          </td>
          <td>
            &#160;
          </td>
          <td>
            <a href="#startVideoCapture">startVideoCapture</a>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <a name="AudioCaptureOptions" id="AudioCaptureOptions">&#160;</a>
    </p>
    <hr>
    <h3 id="audiocaptureoptions">
      AudioCaptureOptions
    </h3>
    <p>
      Options for audio capture.
    </p>
    <h4 id="schema">
      Schema
    </h4>
    <pre>
<code>{
   duration : float,
   size     : unsigned long
}
</code>
</pre>
    <h4 id="elements">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            duration
          </td>
          <td>
            No
          </td>
          <td>
            float
          </td>
          <td>
            If specified, capture <strong><em>must</em></strong> stop after this number of seconds. If there is insufficient device storage, the duration is reduced and a <a href="#durationchange"><code>durationchange</code></a> event fires.
          </td>
        </tr>
        <tr>
          <td>
            size
          </td>
          <td>
            No
          </td>
          <td>
            unsigned long
          </td>
          <td>
            As an alternative to <code>duration</code>, the maximum size (in bytes) can be specified.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>{
   'size' : 1000000,
}
</code>
</pre>
    <p>
      <a name="AudioVolume" id="AudioVolume">&#160;</a>
    </p>
    <hr>
    <h3 id="audiovolume">
      AudioVolume
    </h3>
    <p>
      Volume information used in <a href="#vuData">vuData</a> property. The structure contains a limited number of recent samples, at a rate of approximately one hundred millisecond. The volume samples are an array based on the number of channels (e.g., [0] (left), [1] (right), ...). Volume samples are normalized to 0~1 (<code>peak</code> and <code>rms</code>).
    </p>
    <h4 id="schema-1">
      Schema
    </h4>
    <pre>
<code>{
    peak : float array,
    rms  : float array,
    time : float
}
</code>
</pre>
    <h4 id="elements-1">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            peak
          </td>
          <td>
            No
          </td>
          <td>
            float array
          </td>
          <td>
            The maximum amplitude.
          </td>
        </tr>
        <tr>
          <td>
            rms
          </td>
          <td>
            No
          </td>
          <td>
            float array
          </td>
          <td>
            RMS (root mean square) — Rates the average, continuous amplifier power output.
          </td>
        </tr>
        <tr>
          <td>
            time
          </td>
          <td>
            No
          </td>
          <td>
            float
          </td>
          <td>
            Length of time, in seconds, for this sample.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <a name="CaptureDevice" id="CaptureDevice">&#160;</a>
    </p>
    <hr>
    <h3 id="capturedevice">
      CaptureDevice
    </h3>
    <p>
      Description of device for media capture.
    </p>
    <h4 id="schema-2">
      Schema
    </h4>
    <pre>
<code>{
   description : string,
   inputtype   : array of InputType,
   deviceUri   : string
}
</code>
</pre>
    <h4 id="elements-2">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            description
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Capture device description.
          </td>
        </tr>
        <tr>
          <td>
            inputtype
          </td>
          <td>
            No
          </td>
          <td>
            array of numbers
          </td>
          <td>
            Input types. Possible values:
            <pre>
1 - INPUT_TYPE_AUDIO,
2 - INPUT_TYPE_IMAGE,
3 - INPUT_TYPE_VIDEO
</pre>
          </td>
        </tr>
        <tr>
          <td>
            deviceUri
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Identifier used when calling to <a href="#load">load</a> to set the source to this capture device.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>{
   'description' : &quot;Front Microphone&quot;,
   &quot;inputtype&quot;   : [1],
   &quot;deviceUri&quot;   : &quot;audio&quot;      
}
</code>
</pre>
    <p>
      <a name="CaptureFormat" id="CaptureFormat">&#160;</a>
    </p>
    <hr>
    <h3 id="captureformat">
      CaptureFormat
    </h3>
    <p>
      Object returned to the application when reading the supportedXxxFormats attributes.
    </p>
    <h4 id="schema-3">
      Schema
    </h4>
    <pre>
<code>{
   bitrate    : unsigned long,
   samplerate : unsigned long,
   height     : unsigned long,
   weight     : unsigned long,
   mimetype   : string,
   codecs     : string
}
</code>
</pre>
    <h4 id="elements-3">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            bitrate
          </td>
          <td>
            No
          </td>
          <td>
            unsigned long
          </td>
          <td>
            Estimate for the stream's average total bitrate. Despite being an estimate, it can be used to determine which capture format is most appropriate for the application's needs, e.g., a video streaming app may prefer a capture format whose estimated average bitrate is below 128kb/s.
          </td>
        </tr>
        <tr>
          <td>
            samplerate
          </td>
          <td>
            No
          </td>
          <td>
            unsigned long
          </td>
          <td>
            Sampling rate for audio.
          </td>
        </tr>
        <tr>
          <td>
            height
          </td>
          <td>
            No
          </td>
          <td>
            unsigned long
          </td>
          <td>
            For still and video capture modes — the height of the captured image.
          </td>
        </tr>
        <tr>
          <td>
            width
          </td>
          <td>
            No
          </td>
          <td>
            unsigned long
          </td>
          <td>
            For still and video capture modes — the width of the captured image.
          </td>
        </tr>
        <tr>
          <td>
            mimetype
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            The created file's mimetype.
          </td>
        </tr>
        <tr>
          <td>
            codecs
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Capture encoding format, which should be chosen based on application requirements. For example, a barcode scanning app could prefer a low compression, or raw codec. This parameter is formatted according to RFC4281 for ISO box files (MP4) and RFC2361 for RIFF files (WAV or AVI).
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example device audio formats</strong>
    </p>
    <pre>
<code>[{&quot;mimetype&quot;:&quot;audio/vnd.wave&quot;,&quot;codecs&quot;:&quot;1&quot;,&quot;bitrate&quot;:128000,&quot;samplerate&quot;:8000},
{&quot;mimetype&quot;:&quot;audio/vnd.wave&quot;,&quot;codecs&quot;:&quot;1&quot;,&quot;bitrate&quot;:256000,&quot;samplerate&quot;:16000},
{&quot;mimetype&quot;:&quot;audio/vnd.wave&quot;,&quot;codecs&quot;:&quot;1&quot;,&quot;bitrate&quot;:7100000,&quot;samplerate&quot;:44100},
{&quot;mimetype&quot;:&quot;audio/3gpp&quot;,&quot;codecs&quot;:&quot;samr&quot;,&quot;bitrate&quot;:8000,&quot;samplerate&quot;:8000}]
</code>
</pre>
    <p>
      <strong>Example device image formats</strong>
    </p>
    <pre>
<code>[{&quot;mimetype&quot;:&quot;image/jpeg&quot;,&quot;codecs&quot;:&quot;jpeg&quot;,&quot;width&quot;:2032,&quot;height&quot;:1520}]
</code>
</pre>
    <p>
      <strong>Example device video formats</strong>
    </p>
    <pre>
<code>[{&quot;mimetype&quot;:&quot;video/mp4&quot;,&quot;codecs&quot;:&quot;mp4v.20,mp4a.40&quot;,&quot;width&quot;:640,&quot;height&quot;:480,&quot;bitrate&quot;:1100000}]
</code>
</pre>
    <p>
      <a name="ImageCaptureOptions" id="ImageCaptureOptions">&#160;</a>
    </p>
    <hr>
    <h3 id="imagecaptureoptions">
      ImageCaptureOptions
    </h3>
    <p>
      Options for image capture.
    </p>
    <h4 id="schema-4">
      Schema
    </h4>
    <pre>
<code>{
   quality        : unsigned short,
   flash          : int,
   reviewDuration : float,
   exifData       : string
}
</code>
</pre>
    <h4 id="elements-4">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            quality
          </td>
          <td>
            Yes
          </td>
          <td>
            unisgned short
          </td>
          <td>
            JPEG quality settings, 0-100. Default is 90.
          </td>
        </tr>
        <tr>
          <td>
            flash
          </td>
          <td>
            No
          </td>
          <td>
            integer
          </td>
          <td>
            0 (flash off), 1 (flash auto) or 2 (flash on). Default is 1 (auto).
          </td>
        </tr>
        <tr>
          <td>
            reviewDuration
          </td>
          <td>
            No
          </td>
          <td>
            float
          </td>
          <td>
            How long, in seconds, the image is displayed after the picture is taken.
          </td>
        </tr>
        <tr>
          <td>
            exifData
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Exif (Exchangeable image file format) tags to be stored with image. JSON formatted string. Tags supported include &quot;Make&quot;, &quot;Model&quot;, &quot;CaptureTime&quot; and a GPS structure with fields for Longitude, LongitudeRef, Latitude and LatitiudeRef.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>{
   'duration'       : 100,
   'flash'          : 2,
   'reviewDuration' : 5,
   'exifData'       : {}
}
</code>
</pre>
    <p>
      <a name="LoadOptions" id="LoadOptions">&#160;</a>
    </p>
    <hr>
    <h3 id="loadoptions">
      LoadOptions
    </h3>
    <p>
      Options for load. The <a href="#CaptureFormat">CaptureFormat</a> options are for the pipeline. If the pipeline supports multiple options, e.g., concurrent still and video (INPUT_TYPE_IMAGE, INPUT_TYPE_VIDEO), then one option for image, audio and video can be provided.
    </p>
    <h4 id="schema-5">
      Schema
    </h4>
    <pre>
{
   imageCaptureFormat : <a href="#CaptureFormat">CaptureFormat</a> object,
   audioCaptureFormat : <a href="#CaptureFormat">CaptureFormat</a> object,
   VideoCaptureFormat : <a href="#CaptureFormat">CaptureFormat</a> object
}
</pre>
    <h4 id="elements-5">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            imageCaptureFormat
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a> object.
          </td>
          <td>
            Image capture format options.
          </td>
        </tr>
        <tr>
          <td>
            audioCaptureFormat
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a> object.
          </td>
          <td>
            Audio capture format options.
          </td>
        </tr>
        <tr>
          <td>
            VideoCaptureFormat
          </td>
          <td>
            No
          </td>
          <td>
            <a href="#CaptureFormat">CaptureFormat</a> object.
          </td>
          <td>
            Video capture format options.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>{
   &quot;format&quot;: 
            {  &quot;mimetype&quot;   : &quot;audio/3gpp&quot;,
               &quot;codecs&quot;     : &quot;samr&quot;,
               &quot;bitrate&quot;    : 8000,
               &quot;samplerate&quot; : 8000}
}
</code>
</pre>
    <p>
      <a name="VideoCaptureOptions" id="VideoCaptureOptions">&#160;</a>
    </p>
    <hr>
    <h3 id="videocaptureoptions">
      VideoCaptureOptions
    </h3>
    <p>
      Options for video capture.
    </p>
    <h4 id="schema-6">
      Schema
    </h4>
    <pre>
<code>{
   duration  : float,
   size      : unsigned long,
   title     : string
}
</code>
</pre>
    <h4 id="elements-6">
      Elements
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            duration
          </td>
          <td>
            No
          </td>
          <td>
            float
          </td>
          <td>
            If specified, capture stops after this time (in seconds). If there is insufficient device storage, the duration is reduced and a <a href="#durationchange"><code>durationchange</code></a>. event fires.
          </td>
        </tr>
        <tr>
          <td>
            size
          </td>
          <td>
            No
          </td>
          <td>
            unsigned long
          </td>
          <td>
            As an alternative to '<code>duration</code>', the maximum size (in bytes) can be specified.
          </td>
        </tr>
        <tr>
          <td>
            title
          </td>
          <td>
            No
          </td>
          <td>
            string
          </td>
          <td>
            Title to set in the video metadata.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>{
   &quot;duration&quot;       : 100,
   &quot;size&quot;           : 2000000,
   &quot;title&quot;          : &quot;Ocean Beach&quot;
}
</code>
</pre>
    <hr>
    <h2 id="mediacapture-events">
      MediaCapture Events
    </h2>
    <table border="1">
      <thead>
        <tr>
          <th>
            Event
          </th>
          <th>
            Description
          </th>
          <th>
            Audio/Video/Image
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <a name="audiocapturecomplete" id="audiocapturecomplete">audiocapturecomplete</a>
          </td>
          <td width="400">
            Fired when capture completes. Fires on transition: {<a href="#lastAudioPath">lastAudioPath</a> != null}.
          </td>
          <td>
            A
          </td>
        </tr>
        <tr>
          <td>
            <a name="audiocapturestart" id="audiocapturestart">audiocapturestart</a>
          </td>
          <td width="400">
            Fired when capture starts. Allows the application to put up UI indicating that capture is in progress. Fires on transition: {<a href="#audioCapture">audioCapture</a>==true}.
          </td>
          <td>
            A
          </td>
        </tr>
        <tr>
          <td>
            <a name="durationchange" id="durationchange">durationchange</a>
          </td>
          <td width="400">
            Fires for all <a href="#duration">duration</a> changes.
          </td>
          <td>
            A/V
          </td>
        </tr>
        <tr>
          <td>
            <a name="error" id="error">error</a>
          </td>
          <td width="400">
            Error event indicates failure starting capture or during capture. fires on transition: {<a href="#error">error</a> != ERROR_NONE}
          </td>
          <td>
            A/V/I
          </td>
        </tr>
        <tr>
          <td>
            <a name="imagecapturecomplete" id="imagecapturecomplete">imagecapturecomplete</a>
          </td>
          <td width="400">
            Fired when capture completes. Fires on transition: {<a href="#lastImagePath">lastImagePath</a> != null}
          </td>
          <td>
            I
          </td>
        </tr>
        <tr>
          <td>
            <a name="imagecapturestart" id="imagecapturestart">imagecapturestart</a>
          </td>
          <td width="400">
            Fired when capture starts. Allows the application to put up UI indicating that capture is in progress. Fires on transition: {<a href="#imageCapture">imageCapture</a> == true}.
          </td>
          <td>
            I
          </td>
        </tr>
        <tr>
          <td>
            <a name="ready" id="ready">ready</a>
          </td>
          <td width="400">
            Fired when the pipeline is successfully loaded and ready to start record. Fires on <a href="#ready">ready</a> transitions.
          </td>
          <td>
            A/V/I
          </td>
        </tr>
        <tr>
          <td>
            <a name="videocapturecomplete" id="videocapturecomplete">videocapturecomplete</a>
          </td>
          <td width="400">
            Fired when capture completes. Fires on transition: {<a href="#lastVideoPath">lastVideoPath</a> != null}.
          </td>
          <td>
            V
          </td>
        </tr>
        <tr>
          <td>
            <a name="videocapturestart" id="videocapturestart">videocapturestart</a>
          </td>
          <td width="400">
            Fired when capture starts. Allows the application to put up UI indicating that capture is in progress. Fires on transition: {<a href="#videoCapture">videoCapture</a> == true}
          </td>
          <td>
            V
          </td>
        </tr>
      </tbody>
    </table>
    <hr>
    <h2 id="mediacapture-methods">
      MediaCapture Methods
    </h2>
    <ul>
      <li>
        <a href="#load">load</a>
      </li>
      <li>
        <a href="#startAudioCapture">startAudioCapture</a>
      </li>
      <li>
        <a href="#startImageCapture">startImageCapture</a>
      </li>
      <li>
        <a href="#startVideoCapture">startVideoCapture</a>
      </li>
      <li>
        <a href="#stopAudioCapture">stopAudioCapture</a>
      </li>
      <li>
        <a href="#stopVideoCapture">stopVideoCapture</a>
      </li>
      <li>
        <a href="#unload">unload</a>
      </li>
    </ul>
    <p>
      <a name="load" id="load">&#160;</a>
    </p>
    <hr>
    <h3 id="mediacapture.load">
      MediaCapture.load
    </h3>
    <p>
      Load input device for capture. Starts the capture pipeline, and specifies the capture device. Must be called before capture starts. After your app calls this API, it <strong><em>must</em></strong> call unload before calling it again. Otherwise, the next time your app calls this method, it fails silently.
    </p>
    <h4 id="syntax">
      Syntax
    </h4>
    <pre>
void load(string deviceUri, <a href="#LoadOptions">LoadOptions</a> options);
</pre>
    <h4 id="parameters">
      Parameters
    </h4>
    <table border="1" cellpadding="5" cellspacing="5">
      <thead>
        <tr bgcolor="tan">
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            deviceUri<br>
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            URI of the capture device, read from one of the device selected formats.<br>
          </td>
        </tr>
        <tr>
          <td>
            options<br>
          </td>
          <td>
            Yes
          </td>
          <td>
            <a href="#LoadOptions">LoadOptions</a>
          </td>
          <td>
            Load options—capture device and capture format.<br>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>load( { &quot;audio&quot;,
         {&quot;audioCaptureFormat&quot;: {&quot;mimetype&quot;:&quot;audio/3gpp&quot;,&quot;codecs&quot;:&quot;samr&quot;,&quot;bitrate&quot;:8000,&quot;samplerate&quot;:8000}
       });
</code>
</pre>
    <p>
      <a name="startAudioCapture" id="startAudioCapture">&#160;</a>
    </p>
    <hr>
    <h3 id="mediacapture.startaudiocapture">
      MediaCapture.startAudioCapture
    </h3>
    <p>
      Starts an audio capture with the device specified with <a href="#load">load</a>. Generates an <a href="#audiocapturecomplete">audiocapturecomplete</a> event when done.
    </p>
    <h4 id="syntax-1">
      Syntax
    </h4>
    <pre>
void startAudioCapture(string path, <a href="#AudioCaptureOptions">AudioCaptureOptions</a> options);
</pre>
    <h4 id="parameters-1">
      Parameters
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            path
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Path and filename of audio on the device. For example: &quot;/media/internal/audio/sample1.wav&quot;
          </td>
        </tr>
        <tr>
          <td>
            options
          </td>
          <td>
            Yes
          </td>
          <td>
            <a href="#AudioCaptureOptions">AudioCaptureOptions</a>
          </td>
          <td>
            Audio capture options—duration or size.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>startAudioCapture('/media/internal/myaudio/samples/sample' + this.fileExtension, {});
</code>
</pre>
    <p>
      <a name="startImageCapture" id="startImageCapture">&#160;</a>
    </p>
    <hr>
    <h3 id="mediacapture.startimagecapture">
      MediaCapture.startImageCapture
    </h3>
    <p>
      Starts an image capture with the device specified with <a href="#load">load</a>. Generates an <a href="#imagecapturecomplete">imagecapturecomplete</a> event when done.
    </p>
    <h4 id="syntax-2">
      Syntax
    </h4>
    <pre>
void startImageCapture(string path, <a href="#ImageCaptureOptions">ImageCaptureOptions</a> options);
</pre>
    <h4 id="parameters-2">
      Parameters
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            path
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Path and filename of image on the device. For example: &quot;/media/internal/pics/sample1.jpg&quot;
          </td>
        </tr>
        <tr>
          <td>
            options
          </td>
          <td>
            Yes
          </td>
          <td>
            <a href="#ImageCaptureOptions">ImageCaptureOptions</a>
          </td>
          <td>
            Image capture options—flash, image quality, <a href="http://en.wikipedia.org/wiki/Exchangeable_image_file_format" target="_blank">Exif</a> metadata, and so on.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
<code>var ImageCaptureOptions ={'quality' : 100,'flash': 2,'reviewDuration':5,'exifData':{}}
var picDate = new Date();
this.picName = &quot;Sample&quot; + picDate.UTC(); 
this.startImageCapture('/media/internal/dts/samples/'+this.picName+'.jpg', ImageCaptureOptions);
</code>
</pre>
    <p>
      <a name="startVideoCapture" id="startVideoCapture">&#160;</a>
    </p>
    <hr>
    <h3 id="mediacapture.startvideocapture">
      MediaCapture.startVideoCapture
    </h3>
    <p>
      Starts a video capture with the device specified with <a href="#load">load</a>. Generates a <a href="#videocapturecomplete">videocapturecomplete</a> event when done.
    </p>
    <h4 id="syntax-3">
      Syntax
    </h4>
    <pre>
void startVideoCapture(string path, <a href="#VideoCaptureOptions">VideoCaptureOptions</a> options);
</pre><br>
    <h4 id="parameters-3">
      Parameters
    </h4>
    <table border="1">
      <thead>
        <tr>
          <th>
            Element
          </th>
          <th>
            Required
          </th>
          <th>
            Type
          </th>
          <th>
            Description
          </th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            path
          </td>
          <td>
            Yes
          </td>
          <td>
            string
          </td>
          <td>
            Path and filename of image on the device. For example: &quot;/media/internal/video/sample1.mp4&quot;
          </td>
        </tr>
        <tr>
          <td>
            options
          </td>
          <td>
            Yes
          </td>
          <td>
            <a href="#VideoCaptureOptions">VideoCaptureOptions</a>
          </td>
          <td>
            Video capture options — duration or size and title.
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <strong>Example</strong>
    </p>
    <pre>
this.startVideoCapture('/media/internal/video/samples/'+this.vidName+'.mp4',{'title':'Ocean Beach'});
</pre>
    <p>
      <a name="stopAudioCapture" id="stopAudioCapture">&#160;</a>
    </p>
    <hr>
    <h3 id="mediacapture.stopaudiocapture">
      MediaCapture.stopAudioCapture
    </h3>
    <h4 id="syntax-4">
      Syntax
    </h4>
    <pre>
void stopAudioCapture();
</pre>
    <h4 id="parameters-4">
      Parameters
    </h4>
    <p>
      None
    </p><a name="stopVideoCapture" id="stopVideoCapture"></a>
    <hr>
    <h3 id="mediacapture.stopvideocapture">
      MediaCapture.stopVideoCapture
    </h3>
    <h4 id="syntax-5">
      Syntax
    </h4>
    <pre>
void stopAudioCapture();
</pre>
    <h4 id="parameters-5">
      Parameters
    </h4>
    <p>
      None
    </p>
    <p>
      <a name="unload" id="unload">&#160;</a>
    </p>
    <hr>
    <h3 id="mediacapture.unload">
      MediaCapture.unload
    </h3>
    <p>
      The capture pipeline is stopped and the capture resources are released.
    </p>
    <h4 id="syntax-6">
      Syntax
    </h4>
    <pre>
void unload();
</pre>
    <h4 id="parameters-6">
      Parameters
    </h4>
    <p>
      None
    </p>
		</div>
	</body>
</html>